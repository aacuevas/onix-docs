
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FMC Link Controller &#8212; ONIX Docs 0.0.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/copyURLToClipboard.js"></script>
    <script src="../../_static/default.js"></script>
    <script src="../../_static/wavedrom.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BNO055" href="bno055.html" />
    <link rel="prev" title="FMC Host Clock Output Device" href="fmc-clock-out.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/onix_open_ephys_logo.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../About/index.html">About</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html"> Hardware Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../API%20Reference/index.html"> API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../Software%20Guide/index.html"> Software Guide</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://open-ephys.org">Open Ephys<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys/onix-docs" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
          
            
                <li class="">
                    <a href="../hw-repo-info.html">Hardware Repository Information</a>
                </li>
            
          
            
                <li class="">
                    <a href="../hw-compatibility.html">Version Compatibility</a>
                </li>
            
          
            
                <li class="">
                    <a href="../hw-setup.html">Hardware Setup Guide</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Headstages/index.html">Headstages</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Miniscopes/index.html">Miniscopes</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Adapters%20%26%20EIBs/index.html">Adapters & EIBs</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Breakout%20Boards/index.html">Breakout Boards</a>
                </li>
            
          
            
                <li class="">
                    <a href="../Hosts/index.html">Hosts</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">ONIX Device Datasheets</a>
                    <ul>
                    
                        <li class="">
                            <a href="heartbeat.html">Heartbeat</a>
                        </li>
                    
                        <li class="">
                            <a href="load-test.html">Load Test Device</a>
                        </li>
                    
                        <li class="">
                            <a href="memory-usage.html">Memory Usage Monitor</a>
                        </li>
                    
                        <li class="">
                            <a href="fmc-analog-io.html">FMC Host Analog IO Device</a>
                        </li>
                    
                        <li class="">
                            <a href="fmc-clock-out.html">FMC Host Clock Output Device</a>
                        </li>
                    
                        <li class="active">
                            <a href="">FMC Link Controller</a>
                        </li>
                    
                        <li class="">
                            <a href="bno055.html">BNO055</a>
                        </li>
                    
                        <li class="">
                            <a href="rhd2164.html">RHD2164</a>
                        </li>
                    
                        <li class="">
                            <a href="neuropixels-v1.html">Neuropixels V1</a>
                        </li>
                    
                        <li class="">
                            <a href="estim-hs64.html">HS64 Electrical Stimulator</a>
                        </li>
                    
                        <li class="">
                            <a href="ostim-hs64.html">HS64 Optical Stimulator</a>
                        </li>
                    
                        <li class="">
                            <a href="ts4231-v1-array.html">TS4231 Array for V1 Base Stations</a>
                        </li>
                    
                    </ul>
                </li>
            
          
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#description" class="nav-link">Description</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#register-programming" class="nav-link">Register Programming</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#device-to-host-data-frames" class="nav-link">Device To Host Data Frames</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#host-to-device-data-frames" class="nav-link">Host To Device Data Frames</a>
        </li>
    
    </ul>
</nav>



<div class="tocsection editthispage">
    <a href="https://github.com/open-ephys/onix-docs/edit/master/source/Hardware Guide/Datasheets/fmc-link-control.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="fmc-link-controller">
<span id="onidatasheet-fmc-link-control"></span><h1>FMC Link Controller<a class="headerlink" href="#fmc-link-controller" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Authors</dt>
<dd class="field-odd"><p>Jonathan P. Newman</p>
</dd>
<dt class="field-even">IO</dt>
<dd class="field-even"><p>Frame Source, Register Access</p>
</dd>
<dt class="field-odd">ONIX ID</dt>
<dd class="field-odd"><p>23</p>
</dd>
<dt class="field-even">ONIX Hubs</dt>
<dd class="field-even"><p><a class="reference internal" href="../Hosts/fmc-host_1r3.html#fmc-host-1r3"><span class="std std-ref">fmc-host v1.3</span></a></p>
</dd>
</dl>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong>FMC Host Link Controller</strong> is used to control and monitor DS90UB9x-based
serialized connections to hubs connected to a host such as headstages and
miniscopes. It can control power provided to those hubs and receives RF lock,
CRC error, and other information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Typical inplementaitons will default link voltages to 0. Often the link
will need to be manually activated via the appropriate registers in order
for a headstage to be used.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The maximum DC voltage that can be produced by this device far exceeds the
absolute maximum ratings for most headstages. Although they typically will
have some form input overvoltage protection, the user should be careful to
keep the voltage within a functional range.</p>
</div>
</div>
<div class="section" id="register-programming">
<h2>Register Programming<a class="headerlink" href="#register-programming" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Address</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Time of Effect</p></th>
<th class="head"><p>POR Value</p></th>
<th class="head"><p>Reset Action</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x00</p></td>
<td><p>ENABLE</p></td>
<td><p>R/W</p></td>
<td><p>On Reset</p></td>
<td><p>Implementation dependent, see hub documentation</p></td>
<td><p>None</p></td>
<td><p>The LSB is used to enable or disable the device data stream:</p>
<blockquote>
<div><ul class="simple">
<li><p>0x0: data output disabled</p></li>
<li><p>0x1: data output enabled</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p>GPOSTATE</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>GPO output state (bits 31 downto 3: ignore. bits 2 downto 0: ‘1’ = high, ‘0’ = low)</p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p>DESPWR</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>0</p></td>
<td><p>None</p></td>
<td><p>Set link deserializer PDB state, 0 = deserializer power off else on.  Does not affect port voltage!</p></td>
</tr>
<tr class="row-odd"><td><p>0x03</p></td>
<td><p>PORTVOLTAGE</p></td>
<td><p>R/W</p></td>
<td><p>Immediate</p></td>
<td><p>EEPROM*</p></td>
<td><p>None</p></td>
<td><p>10 * link voltage. Valid values:</p>
<blockquote>
<div><ul class="simple">
<li><p>000         :  Turn off</p></li>
<li><p>001         :  3.3 volts (min)</p></li>
<li><p>…         :  3.3 volts (min)</p></li>
<li><p>032         :  3.3 volts (min)</p></li>
<li><p>033         :  3.3 volts (min)</p></li>
<li><p>034         :  3.4 volts</p></li>
<li><p>035         :  3.5 volts</p></li>
<li><p>…         :  …</p></li>
<li><p>108         : 10.8 volts</p></li>
<li><p>109         : 10.9 volts</p></li>
<li><p>110         : 11.0 volts (max)</p></li>
<li><p>111         : 11.0 volts (max)</p></li>
<li><p>…         : 11.0 volts (max)</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p>0x04</p></td>
<td><p>SAVEVOLTAGE</p></td>
<td><p>W</p></td>
<td><p>Immediate</p></td>
<td><p>EEPROM*</p></td>
<td><p>None</p></td>
<td><p>Save link voltage to non-volatile EEPROM if greater than 0. This
voltage will be applied after POR.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="device-to-host-data-frames">
<h2>Device To Host Data Frames<a class="headerlink" href="#device-to-host-data-frames" title="Permalink to this headline">¶</a></h2>
<p>Each frame transmitted to the host is structured as follows:</p>

<div style="overflow-x:auto">
<script type="WaveDrom">
{
    reg: [
      {bits: 64, name: "Acquisition Clock Counter", type: 0},
      {bits: 32, name: "Device Address", type: 0},
      {bits: 32, name: "Data Size", type: 0, attr: 10},

      {bits: 64, name: "Hub Clock Counter", type: 3},

      {bits: 8, name: "Status Codeword", type: 4},

      {bits: 5, name: "Reserved"},

      {bits: 1, name: "CV", type: 2},
      {bits: 1, name: "PP", type: 2},
      {bits: 1, name: "SL", type: 2},

      {bits: 16}

    ],
    config: {bits: 224, lanes: 7, vflip: true, hflip: true, fontsize: 11}
}
</script>
</div>
<p>This device produces frames when triggered by the <strong>CV</strong>, <strong>PP</strong>, or <strong>SL</strong>
bits. These are defined as follows:</p>
<blockquote>
<div><dl>
<dt>CV</dt><dd><p>Codeword valid. Indicates that the Status Codeword field has valid data.
A frame is produced when this bit goes high. The codeword meaning is
hub-dependent. See hub documentation for definitions.</p>
</dd>
<dt>PP</dt><dd><p>Parity Check Pass. This bit reflects the state of the PASS pin on the
DS90UB9x4 deserializer.</p>
<blockquote>
<div><ul class="simple">
<li><p>0b0: One or more errors were detected in the received payload.</p></li>
<li><p>0b1: Error free transmission in forward channel operation.</p></li>
</ul>
</div></blockquote>
<p>A frame is produced whenever this bit changes state.</p>
</dd>
<dt>SL</dt><dd><p>SERDES Lock. This bit reflects the state of the LOCK pin on the DS90UB9x4
deserializer, which monitors the lock status of FPD-Link III channel.</p>
<blockquote>
<div><ul class="simple">
<li><p>0b0: PLL is unlocked link is down.</p></li>
<li><p>0b1: PLL is locked, link is active.</p></li>
</ul>
</div></blockquote>
<p>A frame is produced whenever this bit changes state.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="host-to-device-data-frames">
<h2>Host To Device Data Frames<a class="headerlink" href="#host-to-device-data-frames" title="Permalink to this headline">¶</a></h2>
<p>This device does not accept input frames. All write attempts will fail with an
error.</p>
</div>
</div>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="fmc-clock-out.html" title="previous page">FMC Host Clock Output Device</a>
    <a class='right-next' id="next-link" href="bno055.html" title="next page">BNO055</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>